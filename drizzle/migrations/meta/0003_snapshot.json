{
  "id": "ebda5dd6-fb09-46ee-a4b9-8d4675977571",
  "prevId": "9cb57358-159b-4cfc-8cda-75f55f69bbfc",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'default'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_key_unique": {
          "name": "api_keys_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.app_version": {
      "name": "app_version",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "version": {
          "name": "version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "build_number": {
          "name": "build_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "git_commit": {
          "name": "git_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "commit_message": {
          "name": "commit_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lines_added": {
          "name": "lines_added",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "lines_deleted": {
          "name": "lines_deleted",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "files_changed": {
          "name": "files_changed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "deployed_at": {
          "name": "deployed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deployment_status": {
          "name": "deployment_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "vercel_deployment_id": {
          "name": "vercel_deployment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "vercel_deployment_url": {
          "name": "vercel_deployment_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deployment_error": {
          "name": "deployment_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_app_version_vercel_deployment_id": {
          "name": "idx_app_version_vercel_deployment_id",
          "columns": [
            {
              "expression": "vercel_deployment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_app_version_git_commit": {
          "name": "idx_app_version_git_commit",
          "columns": [
            {
              "expression": "git_commit",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_app_version_build_number": {
          "name": "idx_app_version_build_number",
          "columns": [
            {
              "expression": "build_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_audit_log": {
      "name": "infra_audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "server_id": {
          "name": "server_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "actor": {
          "name": "actor",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target": {
          "name": "target",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_infra_audit_server": {
          "name": "idx_infra_audit_server",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_audit_action": {
          "name": "idx_infra_audit_action",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_audit_created": {
          "name": "idx_infra_audit_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_audit_target": {
          "name": "idx_infra_audit_target",
          "columns": [
            {
              "expression": "target",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "infra_audit_log_server_id_infra_servers_id_fk": {
          "name": "infra_audit_log_server_id_infra_servers_id_fk",
          "tableFrom": "infra_audit_log",
          "tableTo": "infra_servers",
          "columnsFrom": [
            "server_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_backups": {
      "name": "infra_backups",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "server_id": {
          "name": "server_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "instance_name": {
          "name": "instance_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "backup_type": {
          "name": "backup_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "s3_key": {
          "name": "s3_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_infra_backups_server": {
          "name": "idx_infra_backups_server",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_backups_instance": {
          "name": "idx_infra_backups_instance",
          "columns": [
            {
              "expression": "instance_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_backups_type": {
          "name": "idx_infra_backups_type",
          "columns": [
            {
              "expression": "backup_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "infra_backups_server_id_infra_servers_id_fk": {
          "name": "infra_backups_server_id_infra_servers_id_fk",
          "tableFrom": "infra_backups",
          "tableTo": "infra_servers",
          "columnsFrom": [
            "server_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_builds": {
      "name": "infra_builds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "server_id": {
          "name": "server_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tag": {
          "name": "tag",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "git_commit": {
          "name": "git_commit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "git_branch": {
          "name": "git_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "git_message": {
          "name": "git_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_id": {
          "name": "image_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "triggered_by": {
          "name": "triggered_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "instances_restarted": {
          "name": "instances_restarted",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_infra_builds_server": {
          "name": "idx_infra_builds_server",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_builds_started": {
          "name": "idx_infra_builds_started",
          "columns": [
            {
              "expression": "started_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_builds_tag": {
          "name": "idx_infra_builds_tag",
          "columns": [
            {
              "expression": "tag",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "infra_builds_server_id_infra_servers_id_fk": {
          "name": "infra_builds_server_id_infra_servers_id_fk",
          "tableFrom": "infra_builds",
          "tableTo": "infra_servers",
          "columnsFrom": [
            "server_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_instances": {
      "name": "infra_instances",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "server_id": {
          "name": "server_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subdomain": {
          "name": "subdomain",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'matrx-ship:latest'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'created'"
        },
        "api_key": {
          "name": "api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_secret": {
          "name": "admin_secret",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "postgres_password": {
          "name": "postgres_password",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "postgres_image": {
          "name": "postgres_image",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'postgres:17-alpine'"
        },
        "env_vars": {
          "name": "env_vars",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_infra_instances_server_name": {
          "name": "idx_infra_instances_server_name",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_instances_server": {
          "name": "idx_infra_instances_server",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "infra_instances_server_id_infra_servers_id_fk": {
          "name": "infra_instances_server_id_infra_servers_id_fk",
          "tableFrom": "infra_instances",
          "tableTo": "infra_servers",
          "columnsFrom": [
            "server_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_servers": {
      "name": "infra_servers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hostname": {
          "name": "hostname",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ip": {
          "name": "ip",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "domain_suffix": {
          "name": "domain_suffix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ssh_port": {
          "name": "ssh_port",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 22
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "last_heartbeat": {
          "name": "last_heartbeat",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.infra_tokens": {
      "name": "infra_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "server_id": {
          "name": "server_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'viewer'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_infra_tokens_server": {
          "name": "idx_infra_tokens_server",
          "columns": [
            {
              "expression": "server_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_infra_tokens_hash": {
          "name": "idx_infra_tokens_hash",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "infra_tokens_server_id_infra_servers_id_fk": {
          "name": "infra_tokens_server_id_infra_servers_id_fk",
          "tableFrom": "infra_tokens",
          "tableTo": "infra_servers",
          "columnsFrom": [
            "server_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.logs": {
      "name": "logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "level": {
          "name": "level",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'info'"
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'app'"
        },
        "environment": {
          "name": "environment",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'production'"
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "request_id": {
          "name": "request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "trace_id": {
          "name": "trace_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_logs_source_timestamp": {
          "name": "idx_logs_source_timestamp",
          "columns": [
            {
              "expression": "source",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_logs_level_timestamp": {
          "name": "idx_logs_level_timestamp",
          "columns": [
            {
              "expression": "level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_logs_timestamp": {
          "name": "idx_logs_timestamp",
          "columns": [
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_logs_environment": {
          "name": "idx_logs_environment",
          "columns": [
            {
              "expression": "environment",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_logs_request_id": {
          "name": "idx_logs_request_id",
          "columns": [
            {
              "expression": "request_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.managed_databases": {
      "name": "managed_databases",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "database_name": {
          "name": "database_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "template": {
          "name": "template",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "table_count": {
          "name": "table_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_managed_databases_name": {
          "name": "idx_managed_databases_name",
          "columns": [
            {
              "expression": "database_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_managed_databases_status": {
          "name": "idx_managed_databases_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ticket_activity": {
      "name": "ticket_activity",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ticket_id": {
          "name": "ticket_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "activity_type": {
          "name": "activity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author_type": {
          "name": "author_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author_name": {
          "name": "author_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "visibility": {
          "name": "visibility",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'internal'"
        },
        "requires_approval": {
          "name": "requires_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_activity_timeline": {
          "name": "idx_activity_timeline",
          "columns": [
            {
              "expression": "ticket_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activity_type": {
          "name": "idx_activity_type",
          "columns": [
            {
              "expression": "ticket_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "activity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activity_user_visible": {
          "name": "idx_activity_user_visible",
          "columns": [
            {
              "expression": "ticket_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "visibility",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ticket_activity_ticket_id_tickets_id_fk": {
          "name": "ticket_activity_ticket_id_tickets_id_fk",
          "tableFrom": "ticket_activity",
          "tableTo": "tickets",
          "columnsFrom": [
            "ticket_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ticket_attachments": {
      "name": "ticket_attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ticket_id": {
          "name": "ticket_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "original_name": {
          "name": "original_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_attachments_ticket": {
          "name": "idx_attachments_ticket",
          "columns": [
            {
              "expression": "ticket_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ticket_attachments_ticket_id_tickets_id_fk": {
          "name": "ticket_attachments_ticket_id_tickets_id_fk",
          "tableFrom": "ticket_attachments",
          "tableTo": "tickets",
          "columnsFrom": [
            "ticket_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tickets": {
      "name": "tickets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ticket_number": {
          "name": "ticket_number",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ticket_type": {
          "name": "ticket_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'new'"
        },
        "resolution": {
          "name": "resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::text[]"
        },
        "route": {
          "name": "route",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "environment": {
          "name": "environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_info": {
          "name": "browser_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "os_info": {
          "name": "os_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reporter_id": {
          "name": "reporter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reporter_name": {
          "name": "reporter_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reporter_email": {
          "name": "reporter_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assignee": {
          "name": "assignee",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "direction": {
          "name": "direction",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_assessment": {
          "name": "ai_assessment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_solution_proposal": {
          "name": "ai_solution_proposal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_suggested_priority": {
          "name": "ai_suggested_priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_complexity": {
          "name": "ai_complexity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_estimated_files": {
          "name": "ai_estimated_files",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "autonomy_score": {
          "name": "autonomy_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "work_priority": {
          "name": "work_priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "testing_result": {
          "name": "testing_result",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "needs_followup": {
          "name": "needs_followup",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "followup_notes": {
          "name": "followup_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "followup_after": {
          "name": "followup_after",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "client_reference_id": {
          "name": "client_reference_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_tickets_project_status": {
          "name": "idx_tickets_project_status",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_project_status_created": {
          "name": "idx_tickets_project_status_created",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_reporter": {
          "name": "idx_tickets_reporter",
          "columns": [
            {
              "expression": "reporter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_number": {
          "name": "idx_tickets_number",
          "columns": [
            {
              "expression": "ticket_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_work_priority": {
          "name": "idx_tickets_work_priority",
          "columns": [
            {
              "expression": "work_priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_idempotent": {
          "name": "idx_tickets_idempotent",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "client_reference_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"tickets\".\"client_reference_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_followup": {
          "name": "idx_tickets_followup",
          "columns": [
            {
              "expression": "needs_followup",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "followup_after",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"tickets\".\"needs_followup\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tickets_parent": {
          "name": "idx_tickets_parent",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.vw_ticket_timeline": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "ticket_number": {
          "name": "ticket_number",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'new'"
        },
        "resolution": {
          "name": "resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "activity_type": {
          "name": "activity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author_type": {
          "name": "author_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author_name": {
          "name": "author_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "visibility": {
          "name": "visibility",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'internal'"
        },
        "requires_approval": {
          "name": "requires_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "definition": "select \"tickets\".\"id\", \"tickets\".\"ticket_number\", \"tickets\".\"title\", \"tickets\".\"status\", \"tickets\".\"resolution\", \"ticket_activity\".\"id\", \"ticket_activity\".\"activity_type\", \"ticket_activity\".\"author_type\", \"ticket_activity\".\"author_name\", \"ticket_activity\".\"content\", \"ticket_activity\".\"metadata\", \"ticket_activity\".\"visibility\", \"ticket_activity\".\"requires_approval\", \"ticket_activity\".\"approved_by\", \"ticket_activity\".\"approved_at\", \"ticket_activity\".\"created_at\" from \"tickets\" inner join \"ticket_activity\" on \"ticket_activity\".\"ticket_id\" = \"tickets\".\"id\" where \"tickets\".\"deleted_at\" IS NULL order by \"tickets\".\"id\", \"ticket_activity\".\"created_at\"",
      "name": "vw_ticket_timeline",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}